{"ast":null,"code":"import _slicedToArray from\"C:/Users/blood/Documents/School/4A/PST/PST4A/MUSIARK/pst-4a-MusIA/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import MusiaLogotransparent from'../assets/logo_trans.png';import'../styles/Content.css';import{useState,useEffect}from'react';import Prediction from'./Prediction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Listening(_ref){var id=_ref.id,setIsContent=_ref.setIsContent,isReceiving=_ref.isReceiving,setIsReceiving=_ref.setIsReceiving,setIsListening=_ref.setIsListening;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setdata=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isDisplay=_useState4[0],setIsDisplay=_useState4[1];useEffect(function(){if(isReceiving===true&&isDisplay===false){fetch(' https://ee0c-185-144-25-51.eu.ngrok.io/api/v01/get/res/?id='+id,{method:\"get\",headers:new Headers({\"ngrok-skip-browser-warning\":\"69420\"})}).then(function(response){console.log(response);return response.json();// <<- Return the JSON Object\n}).then(function(result){console.log(result);if(result[1]===-1){alert(\"La musique n'a pas été reconnu essayons par URL\");setIsReceiving(false);setIsListening(false);setIsContent(1);}else{setdata(result);setIsDisplay(true);}}).catch(function(error){// Use .catch() to catch exceptions. Either in the request or any of your .then() blocks\nconsole.error(error);// Log the error object in the console.\nvar errorMessage='Something went wrong';console.log(errorMessage);setIsListening(0);setIsReceiving(0);setIsContent(0);});}},[isReceiving,isDisplay,data,setIsContent,setIsListening,setIsReceiving,id]);return isReceiving?/*#__PURE__*/_jsx(Prediction,{isDisplay:isDisplay,setIsDisplay:setIsDisplay,data:data}):/*#__PURE__*/_jsxs(\"div\",{className:\"ContentListening\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"transbutton\",alt:\"Listening\",children:/*#__PURE__*/_jsx(\"img\",{src:MusiaLogotransparent,className:\"App-logo\",alt:\"Logo\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"L'application est en \\xE9coute, veuillez patienter.\"})]});}export default Listening;","map":{"version":3,"names":["MusiaLogotransparent","useState","useEffect","Prediction","Listening","id","setIsContent","isReceiving","setIsReceiving","setIsListening","data","setdata","isDisplay","setIsDisplay","fetch","method","headers","Headers","then","response","console","log","json","result","alert","catch","error","errorMessage"],"sources":["C:/Users/blood/Documents/School/4A/PST/PST4A/MUSIARK/pst-4a-MusIA/app/src/Components/Listening.js"],"sourcesContent":["import MusiaLogotransparent from '../assets/logo_trans.png'\r\nimport '../styles/Content.css';\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport Prediction from './Prediction';\r\n\r\nfunction Listening({id,setIsContent,isReceiving,setIsReceiving,setIsListening}) {\r\n  \r\n  const [data, setdata] = useState({});\r\n  const [isDisplay, setIsDisplay] = useState(false);\r\n\r\n \r\n  useEffect(() => {\r\n    if(isReceiving===true && isDisplay ===false){\r\n      fetch(' https://ee0c-185-144-25-51.eu.ngrok.io/api/v01/get/res/?id='+id, {\r\n        method: \"get\",\r\n        headers: new Headers({\r\n          \"ngrok-skip-browser-warning\": \"69420\",\r\n        }),\r\n      })\r\n      .then(response => {\r\n          console.log(response)\r\n          return response.json(); // <<- Return the JSON Object\r\n      })\r\n      .then(result => {\r\n        console.log(result)\r\n        if(result[1] === -1)\r\n        {\r\n          alert(\"La musique n'a pas été reconnu essayons par URL\")\r\n          setIsReceiving(false)\r\n          setIsListening(false)\r\n          setIsContent(1)         \r\n        }\r\n        else{\r\n          setdata(result);\r\n          setIsDisplay(true);\r\n        }\r\n        \r\n      })\r\n      .catch(error => { // Use .catch() to catch exceptions. Either in the request or any of your .then() blocks\r\n          console.error(error); // Log the error object in the console.\r\n          const errorMessage = 'Something went wrong';\r\n          console.log(errorMessage);\r\n          setIsListening(0);\r\n          setIsReceiving(0);\r\n          setIsContent(0);\r\n      });\r\n    }\r\n},[isReceiving,isDisplay,data,setIsContent,setIsListening,setIsReceiving,id]);\r\n \r\n    \r\n  \r\n    \r\n\r\n\r\n  return isReceiving ? (\r\n    <Prediction isDisplay={isDisplay} setIsDisplay={setIsDisplay} data={data} />\r\n  )  :  (\r\n    <div className=\"ContentListening\">\r\n        <button className=\"transbutton\" alt=\"Listening\" ><img src={MusiaLogotransparent} className=\"App-logo\" alt=\"Logo\" /></button>\r\n        <p>\r\n          L'application est en écoute, veuillez patienter.\r\n        </p>\r\n    </div>\r\n  );\r\n} \r\n\r\nexport default Listening;\r\n"],"mappings":"2JAAA,MAAOA,qBAAoB,KAAM,0BAA0B,CAC3D,MAAO,uBAAuB,CAE9B,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAOC,WAAU,KAAM,cAAc,CAAC,wFAEtC,QAASC,UAAS,MAA8D,IAA5DC,GAAE,MAAFA,EAAE,CAACC,YAAY,MAAZA,YAAY,CAACC,WAAW,MAAXA,WAAW,CAACC,cAAc,MAAdA,cAAc,CAACC,cAAc,MAAdA,cAAc,CAE3E,cAAwBR,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAA7BS,IAAI,eAAEC,OAAO,eACpB,eAAkCV,QAAQ,CAAC,KAAK,CAAC,yCAA1CW,SAAS,eAAEC,YAAY,eAG9BX,SAAS,CAAC,UAAM,CACd,GAAGK,WAAW,GAAG,IAAI,EAAIK,SAAS,GAAI,KAAK,CAAC,CAC1CE,KAAK,CAAC,8DAA8D,CAACT,EAAE,CAAE,CACvEU,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,GAAIC,QAAO,CAAC,CACnB,4BAA4B,CAAE,OAChC,CAAC,CACH,CAAC,CAAC,CACDC,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC,CACrB,MAAOA,SAAQ,CAACG,IAAI,EAAE,CAAE;AAC5B,CAAC,CAAC,CACDJ,IAAI,CAAC,SAAAK,MAAM,CAAI,CACdH,OAAO,CAACC,GAAG,CAACE,MAAM,CAAC,CACnB,GAAGA,MAAM,CAAC,CAAC,CAAC,GAAK,CAAC,CAAC,CACnB,CACEC,KAAK,CAAC,iDAAiD,CAAC,CACxDhB,cAAc,CAAC,KAAK,CAAC,CACrBC,cAAc,CAAC,KAAK,CAAC,CACrBH,YAAY,CAAC,CAAC,CAAC,CACjB,CAAC,IACG,CACFK,OAAO,CAACY,MAAM,CAAC,CACfV,YAAY,CAAC,IAAI,CAAC,CACpB,CAEF,CAAC,CAAC,CACDY,KAAK,CAAC,SAAAC,KAAK,CAAI,CAAE;AACdN,OAAO,CAACM,KAAK,CAACA,KAAK,CAAC,CAAE;AACtB,GAAMC,aAAY,CAAG,sBAAsB,CAC3CP,OAAO,CAACC,GAAG,CAACM,YAAY,CAAC,CACzBlB,cAAc,CAAC,CAAC,CAAC,CACjBD,cAAc,CAAC,CAAC,CAAC,CACjBF,YAAY,CAAC,CAAC,CAAC,CACnB,CAAC,CAAC,CACJ,CACJ,CAAC,CAAC,CAACC,WAAW,CAACK,SAAS,CAACF,IAAI,CAACJ,YAAY,CAACG,cAAc,CAACD,cAAc,CAACH,EAAE,CAAC,CAAC,CAO3E,MAAOE,YAAW,cAChB,KAAC,UAAU,EAAC,SAAS,CAAEK,SAAU,CAAC,YAAY,CAAEC,YAAa,CAAC,IAAI,CAAEH,IAAK,EAAG,cAE5E,aAAK,SAAS,CAAC,kBAAkB,wBAC7B,eAAQ,SAAS,CAAC,aAAa,CAAC,GAAG,CAAC,WAAW,uBAAE,YAAK,GAAG,CAAEV,oBAAqB,CAAC,SAAS,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,EAAG,EAAS,cAC5H,mBAAG,qDAEH,EAAI,GAET,CACH,CAEA,cAAeI,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}
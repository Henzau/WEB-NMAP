{"ast":null,"code":"import{useD3}from'../hooks/useD3';import React from'react';import*as d3 from'd3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BarChart(_ref){var data=_ref.data;var ref=useD3(function(svg){var box=document.querySelector(\".result\");var width=box.offsetWidth;var height=box.offsetHeight;var xScale=d3.scaleLinear().domain([0,d3.max(data,function(d){return d[1];})]).range([0,width*0.55]);var yScale=d3.scaleLinear().domain([0,data.length]).range([0,height*0.95]);var w=width*0.05;svg.selectAll(\"rect\").data(data).enter().append(\"rect\").attr(\"rx\",15).attr(\"y\",function(d,i){return yScale(i)+(yScale(2)-yScale(1))/2-(yScale(2)-yScale(1))/4;}).attr(\"x\",function(d,i){return w;}).attr(\"width\",function(d,i){return xScale(d[1]);}).attr(\"height\",(yScale(2)-yScale(1))/2).attr(\"fill\",\"navy\").attr(\"class\",\"bar\").append(\"title\").text(function(d){return d;});svg.selectAll('text.rotation').data(data).enter().append('text').text(function(d){return d[0]+\" - \"+parseInt(d[1]*100)+\"%\";}).classed('rotation',true).attr('fill','black').attr('transform',function(d,i){return'translate( '+(xScale(d[1])+w+width*0.01)+' , '+(yScale(i)+(yScale(2)-yScale(1))/2+(yScale(2)-yScale(1))/6)+')';}).style(\"font-size\",width*0.04);},[data]);return/*#__PURE__*/_jsxs(\"svg\",{ref:ref,style:{height:\"100%\",width:\"100%\",marginRight:\"auto\",marginLeft:\"auto\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"g\",{className:\"plot-area\"}),/*#__PURE__*/_jsx(\"g\",{className:\"x-axis\"}),/*#__PURE__*/_jsx(\"g\",{className:\"y-axis\"})]});}export default BarChart;","map":{"version":3,"names":["useD3","React","d3","BarChart","data","ref","svg","box","document","querySelector","width","offsetWidth","height","offsetHeight","xScale","scaleLinear","domain","max","d","range","yScale","length","w","selectAll","enter","append","attr","i","text","parseInt","classed","style","marginRight","marginLeft","textAlign"],"sources":["C:/Users/blood/Documents/School/4A/PST/PST4A/MUSIARK/pst-4a-MusIA/app/src/Components/BarChart.js"],"sourcesContent":["import { useD3 } from '../hooks/useD3';\r\nimport React from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nfunction BarChart({ data}) {\r\n  const ref = useD3(\r\n    (svg) => {\r\n      const box = document.querySelector(\".result\");\r\n      const width = box.offsetWidth;\r\n      const height = box.offsetHeight;\r\n      \r\n      \r\n      const xScale = d3.scaleLinear()\r\n            .domain([0, d3.max(data,d=>d[1])])\r\n    \t\t\t .range([0, width*0.55]);\r\n      const yScale = d3.scaleLinear()\r\n            .domain([0, data.length])\r\n            .range([0, height*0.95]);\r\n      const w = width*0.05;    \r\n      \r\n      \r\n      svg.selectAll(\"rect\")\r\n        .data(data)\r\n        .enter()\r\n        .append(\"rect\")\r\n        .attr(\"rx\",15)\r\n        .attr(\"y\", (d, i) => yScale(i)+ (yScale(2) - yScale(1))/2 - (yScale(2) - yScale(1))/4)\r\n        .attr(\"x\", (d, i) => w)\r\n        .attr(\"width\", (d, i) => xScale(d[1]))\r\n        .attr(\"height\", (yScale(2) - yScale(1))/2)\r\n        .attr(\"fill\", \"navy\")\r\n        .attr(\"class\", \"bar\")\r\n        .append(\"title\")\r\n        .text((d) => d);\r\n        \r\n    \r\n      svg.selectAll('text.rotation')\r\n      .data(data)\r\n      .enter()\r\n      .append('text')\r\n      .text((d)=> d[0] +\" - \"+ parseInt(d[1]*100) +\"%\")\r\n      .classed('rotation', true)\r\n      .attr('fill', 'black')\r\n      .attr('transform', (d,i)=>{\r\n        return 'translate( '+ (xScale(d[1])+ w + width*0.01) +' , '+ (yScale(i)+ (yScale(2) - yScale(1))/2 + (yScale(2) - yScale(1))/6) +')';\r\n      })\r\n      .style(\"font-size\",width*0.04);\r\n      \r\n\r\n      \r\n    },\r\n    [data]\r\n  );\r\n\r\n  return (\r\n    <svg\r\n      ref={ref}\r\n      style={{\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        marginRight: \"auto\",\r\n        marginLeft: \"auto\",\r\n        textAlign: \"center\"\r\n      }}\r\n    >\r\n      <g className=\"plot-area\" />\r\n      <g className=\"x-axis\" />\r\n      <g className=\"y-axis\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default BarChart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}